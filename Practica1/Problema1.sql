DROP TABLE IF EXISTS A,B,C,D,E,F,G,H,I,R4,R10 CASCADE;

-- Práctica: 1
-- Autor: Iván Ruiz Gázquez

CREATE TABLE A
(
  a1 INT PRIMARY KEY,
  a2 INT,
  r9_a1 INT REFERENCES A
);

CREATE TABLE F
(
  f1 INT PRIMARY KEY,
  f2 INT
);

CREATE TABLE C
(
  c1 INT PRIMARY KEY,
  c2 INT,
  f1 INT REFERENCES F
);

CREATE TABLE B
(
  b1 INT,
  b2 INT,
  a1 INT REFERENCES A,
  c1 INT UNIQUE NOT NULL REFERENCES C,
  PRIMARY KEY (a1, b1)
);

CREATE TABLE D
(
  d1 INT PRIMARY KEY,
  d2 INT,
  c1 INT REFERENCES C
);

CREATE TABLE E
(
  e1 INT PRIMARY KEY,
  e2 INT
);

CREATE TABLE G
(
  g1 INT,
  g2 INT,
  f1 INT REFERENCES F,
  PRIMARY KEY (g1, f1)
);

CREATE TABLE H
(
  h1 INT PRIMARY KEY,
  h2 INT,
  c1 INT NOT NULL REFERENCES C
);

CREATE TABLE I
(
  i1 INT,
  i2 INT,
  h1 INT REFERENCES H,
  r11_i1 INT,
  r11_h1 INT,
  FOREIGN KEY(r11_i1, r11_h1) REFERENCES I,
  PRIMARY KEY (i1, h1)
);

CREATE TABLE R4
(
  r4_d1 INT REFERENCES D,
  r4_e1 INT REFERENCES E,
  PRIMARY KEY (r4_d1, r4_e1)
);

CREATE TABLE R10
(
  r10_g1_1 INT,
  r10_f1_1 INT,
  r10_g1_2 INT,
  r10_f1_2 INT,
  PRIMARY KEY (r10_g1_1, r10_f1_1, r10_g1_2, r10_f1_2),
  FOREIGN KEY (r10_g1_1, r10_f1_1) REFERENCES G,
  FOREIGN KEY (r10_g1_2, r10_f1_2) REFERENCES G
);
